<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Medicine Store</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: #f8fafc;
            color: #1a1a1a;
            margin: 0;
            padding: 0;
        }

        header {
            background: linear-gradient(135deg, #1a1a1a 0%, #333333 100%);
            padding: 1rem;
            position: fixed;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: 1px;
        }

        .cart-button {
            position: relative;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            transition: all 0.3s ease;
            color: white;
        }

        .cart-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .search-bar input {
            background: transparent;
            border: none;
            color: white;
            width: 100%;
            outline: none;
        }

        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .product-container {
            padding-top: 100px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            padding-inline: 2rem;
            position: relative;
        }

        .product-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .product-image-container {
            position: relative;
            overflow: hidden;
            padding-top: 75%;
        }

        .product-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.1);
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 0.5rem;
        }

        .product-description {
            color: #636e72;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .product-details-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1100;
}

.product-details-content {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    width: 90%;
    max-width: 500px;
    position: relative;
    animation: slideIn 0.3s ease;
}

.close-details {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #666;
    transition: color 0.3s ease;
}

.close-details:hover {
    color: #000;
}

.product-details-header {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

.product-details-image {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 10px;
}

.product-details-info {
    flex: 1;
}

.details-section {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #eee;
}

.details-section:last-child {
    border-bottom: none;
}

.stock-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 50px;
    background: #e2f8f0;
    color: #0d9488;
    font-size: 0.875rem;
    font-weight: 500;
}

        .price-tag {
            display: inline-block;
            background: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .original-price {
            color: #b2bec3;
            text-decoration: line-through;
            margin-left: 0.5rem;
        }

        .discount-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #ff4757;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            z-index: 1;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .add-to-cart-btn, .show-details-btn, .checkout-btn {
            padding: 0.75rem;
            border-radius: 50px;
            border: none;
            background: linear-gradient(135deg, #1a1a1a 0%, #333333 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 0.5rem;
        }

        .add-to-cart-btn:hover, .show-details-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .product-details {
            display: none;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }

        .product-details.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .wishlist-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            background: #f1f2f6;
            color: #ff4757;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .wishlist-btn:hover {
            background: #ff4757;
            color: white;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .cart-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin-bottom: 1rem;
            background: #f8fafc;
            border-radius: 15px;
        }

        .cart-item-info {
            flex: 1;
            margin-left: 1rem;
        }

        .cart-quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            background: #e0e0e0;
            color: #333;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: #d0d0d0;
        }

        .cart-total {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 2px solid #f1f2f6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            margin-top: 1rem;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #00b4db 0%, #0083b0 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 180, 219, 0.4);
        }

        #qrCodeSection {
            margin-top: 2rem;
            text-align: center;
        }

        #qrCode {
            margin: 1rem auto;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }

        .search-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            width: 300px;
            margin: 0 2rem;
        }

        .search-bar input {
            background: transparent;
            border: none;
            color: white;
            width: 100%;
            outline: none;
        }

        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Loading animation */
        .loading {
            position: fixed;
            inset: 0;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #00b4db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
    </div>

    <header class="glass-effect">
        <div class="flex items-center justify-between px-4">
            <div class="logo">Medicine Store</div>
            <div class="search-bar">
                <input type="text" placeholder="Search medicines..." id="searchInput">
            </div>
            <button class="cart-button" id="cart-button">
                ðŸ›’ Cart <span class="cart-badge" id="cart-count">0</span>
            </button>
        </div>
    </header>

    <main>
        <div class="product-container" id="product-container"></div>
    </main>

    <div class="modal" id="cart-modal">
        <div class="modal-content">
            <h2 class="text-2xl font-bold mb-4">Your Cart</h2>
            <div id="cart-items"></div>
            <div class="cart-total">
                <span>Total Amount:</span>
                <span id="cart-total">â‚¹0</span>
            </div>
            <button id="checkout-btn" class="checkout-btn">Proceed to Checkout</button>
            <button id="close-cart" class="checkout-btn mt-3" style="background: #ff4757;">Close Cart</button>
            
            <div id="qrCodeSection" style="display:none;">
                <h3 class="text-xl font-semibold mb-3">Scan to Pay</h3>
                <canvas id="qrCode"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <script>
        // Your existing JavaScript code here, but let's add some enhancements

        const products = [
    { id: 1, name: 'Crocin Pain Relief Tablet', description: 'Effective relief from headaches and body pain', currentPrice: 70, originalPrice: 60, discount: 25, category: 'Pain Relief', stock: 100, uses: ['Headache', 'Fever', 'Body Pain'], manufacturer: 'GSK', imageUrl: 'https://etimg.etb2bimg.com/thumb/msid-71835327,width-1200,height-900,resizemode-4/.jpg' },
    { id: 2, name: 'Dolo 650 Paracetamol', description: 'Trusted fever and pain management tablet', currentPrice: 30, originalPrice: 45, discount: 33, category: 'Fever Medication', stock: 80, uses: ['Fever', 'Mild Pain'], manufacturer: 'Micro Labs', imageUrl: 'https://images.moneycontrol.com/static-hindinews/2022/01/dolo650.jpg?impolicy=website&width=770&height=431' },
    { id: 3, name: 'Zithmax Azithromycin', description: 'Broad-spectrum antibiotic for bacterial infections', currentPrice: 120, originalPrice: 180, discount: 33, category: 'Antibiotics', stock: 50, uses: ['Respiratory Infections', 'Skin Infections'], manufacturer: 'Cipla', imageUrl: 'https://www.xalmeds.com/cdn/shop/files/D55D1C73-75C8-4CDF-A1E8-D30F9DBD2FF0_de2d2e0c-ffa2-4d82-909e-63c386ae8c4a_500x.png?v=1714449903' },
    { id: 4, name: 'Allegra 120mg', description: 'Antihistamine for allergy symptoms', currentPrice: 150, originalPrice: 200, discount: 25, category: 'Allergy Medication', stock: 70, uses: ['Allergy', 'Cold', 'Hay Fever'], manufacturer: 'Sanofi', imageUrl: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSqGikAJ339bPP4St1MvSEJd1d0yJ7n1wQQnA&s' },
    { id: 5, name: 'Ibuprofen 400mg', description: 'Pain reliever and anti-inflammatory', currentPrice: 50, originalPrice: 70, discount: 28, category: 'Pain Relief', stock: 90, uses: ['Pain', 'Inflammation', 'Fever'], manufacturer: 'Pfizer', imageUrl: 'https://images.jdmagicbox.com/quickquotes/images_main/ibuprofen-400-mg-tablet-383723348-x4azu.jpg' },
    { id: 6, name: 'Amlodipine 5mg', description: 'For hypertension and angina', currentPrice: 60, originalPrice: 85, discount: 29, category: 'Cardiovascular', stock: 120, uses: ['High Blood Pressure', 'Angina'], manufacturer: 'Novartis', imageUrl: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTlf0VB7_WRJgAKJoQj3i1ZA9jgGfssylYxrw&s' },
    { id: 7, name: 'Metformin 500mg', description: 'Helps control blood sugar levels', currentPrice: 100, originalPrice: 120, discount: 17, category: 'Diabetes Medication', stock: 50, uses: ['Diabetes'], manufacturer: 'Boehringer Ingelheim', imageUrl: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS5mBbd0YFTKQG5tXpEs9emqXjPt4nToZ2AAQ&s' },
    { id: 8, name: 'Omeprazole 20mg', description: 'Used to treat acid reflux and stomach ulcers', currentPrice: 120, originalPrice: 150, discount: 20, category: 'Gastrointestinal', stock: 85, uses: ['Acid Reflux', 'Stomach Ulcers'], manufacturer: 'AstraZeneca', imageUrl: 'https://www.medicinedirect.co.uk/media/catalog/product/cache/8bf3693ed458c257f5171ffffa4e8921/o/m/omeprazole_20mg_-buy_online_uk_-_medicine_direct.jpg' },
    { id: 9, name: 'Clindamycin 300mg', description: 'Antibiotic for treating infections', currentPrice: 180, originalPrice: 250, discount: 28, category: 'Antibiotics', stock: 65, uses: ['Infections'], manufacturer: 'Pfizer', imageUrl: 'https://productimages.withfloats.com/actual/666167419917812fea58a6bc.png' },
    { id: 10, name: 'Paracetamol 500mg', description: 'Pain reliever and fever reducer', currentPrice: 20, originalPrice: 30, discount: 33, category: 'Pain Relief', stock: 200, uses: ['Fever', 'Pain'], manufacturer: 'Various', imageUrl: 'https://mcgrocer.com/cdn/shop/files/a5be44195b841201b000d4bbe26126d8_9b7a020c-afdb-4fac-9a6d-3a74d4de83e8.jpg?v=1737135919' },
    { id: 11, name: 'Tamsulosin 0.4mg', description: 'Treatment for enlarged prostate', currentPrice: 180, originalPrice: 220, discount: 18, category: 'Prostate Health', stock: 60, uses: ['Enlarged Prostate'], manufacturer: 'Boehringer Ingelheim', imageUrl: 'https://rukminim2.flixcart.com/fk-p-harbour/600/600/images/incom/images/product/Dynapres-1647072058-10018930-1.jpg?q=60' },
    { id: 12, name: 'Ciprofloxacin 500mg', description: 'Antibiotic for bacterial infections', currentPrice: 80, originalPrice: 100, discount: 20, category: 'Antibiotics', stock: 75, uses: ['Bacterial Infections'], manufacturer: 'Bayer', imageUrl: 'https://dkud4u09qff41.cloudfront.net/Products/811d094b-7e21-4b62-9f80-981b0aa1c1f2.jpeg' },
    { id: 13, name: 'Cetirizine 10mg', description: 'Antihistamine for allergy symptoms', currentPrice: 50, originalPrice: 75, discount: 33, category: 'Allergy Medication', stock: 100, uses: ['Allergy', 'Hay Fever'], manufacturer: 'Zydus', imageUrl: 'https://4.imimg.com/data4/MU/BW/MY-4092588/cetirizine-tablets-500x500.jpg' },
    { id: 14, name: 'Fluconazole 150mg', description: 'Antifungal medication', currentPrice: 150, originalPrice: 200, discount: 25, category: 'Antifungal', stock: 40, uses: ['Fungal Infections'], manufacturer: 'Pfizer', imageUrl: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4RRfRcTGMdyznCNrLLNr-25qtrxnuSlAnKBP6x9twqLqYEEbGYiIwpOz9_sSIc4FBawY&usqp=CAU' },
    { id: 15, name: 'Loratadine 10mg', description: 'Non-drowsy antihistamine', currentPrice: 70, originalPrice: 90, discount: 22, category: 'Allergy Medication', stock: 90, uses: ['Allergies', 'Skin Reactions'], manufacturer: 'Claritin', imageUrl: 'https://images.apollo247.in/pub/media/catalog/product/l/o/lor0635_3.jpg?tr=q-80,f-webp,w-400,dpr-3,c-at_max%201200w' },
    { id: 16, name: 'Amoxicillin 500mg', description: 'Antibiotic for bacterial infections', currentPrice: 120, originalPrice: 150, discount: 20, category: 'Antibiotics', stock: 50, uses: ['Bacterial Infections'], manufacturer: 'GSK', imageUrl: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTAuq_dSJU_wFi2AOiot1LEZ0f5rtrjIfnXqw&s' },
    { id: 17, name: 'Atorvastatin 10mg', description: 'Cholesterol-lowering medication', currentPrice: 150, originalPrice: 200, discount: 25, category: 'Cardiovascular', stock: 80, uses: ['Cholesterol'], manufacturer: 'Pfizer', imageUrl: 'https://www.sterisonline.com/uploads/blog/main/ATOVASTRIN10NEW_CAT_1722418831.png' },
    { id: 18, name: 'Lorazepam 2mg', description: 'Medication for anxiety and sleep issues', currentPrice: 250, originalPrice: 300, discount: 17, category: 'Anxiety Medication', stock: 30, uses: ['Anxiety', 'Insomnia'], manufacturer: 'AbbVie', imageUrl: 'https://static2.medplusmart.com/products/_e557dba_/LORA0123_L.jpg' },
    { id: 19, name: 'Fexofenadine 120mg', description: 'Non-drowsy antihistamine for allergies', currentPrice: 100, originalPrice: 140, discount: 28, category: 'Allergy Medication', stock: 60, uses: ['Allergy', 'Rashes'], manufacturer: 'Sanofi', imageUrl: 'https://www.netmeds.com/images/product-v1/600x600/17059/allegra_120mg_tablet_10s_0_1.jpg' },
    { id: 20, name: 'Prednisolone 5mg', description: 'Steroid for inflammation and immune system', currentPrice: 60, originalPrice: 90, discount: 33, category: 'Steroids', stock: 45, uses: ['Inflammation', 'Autoimmune Diseases'], manufacturer: 'Mylan', imageUrl: 'https://5.imimg.com/data5/SELLER/Default/2023/10/349142229/OV/ZC/IB/25204550/71-prednisolone-tablets-bp-5-mg.jpg' },
    { id: 21, name: 'Dexamethasone 2mg', description: 'Anti-inflammatory and immune system modifier', currentPrice: 150, originalPrice: 200, discount: 25, category: 'Steroids', stock: 100, uses: ['Inflammation', 'Allergies'], manufacturer: 'Merck', imageUrl: 'https://5.imimg.com/data5/SELLER/Default/2021/7/EB/IA/AE/49210193/2mg-dexmethasone-tablets.PNG' },
    { id: 22, name: 'Lisinopril 10mg', description: 'Used to treat high blood pressure', currentPrice: 80, originalPrice: 100, discount: 20, category: 'Cardiovascular', stock: 110, uses: ['High Blood Pressure'], manufacturer: 'Merck', imageUrl: 'https://5.imimg.com/data5/SELLER/Default/2023/5/306705233/JB/KB/IY/71251776/lisinopril-10mg-tablets.jpg' },
    { id: 23, name: 'Losartan 50mg', description: 'Angiotensin II receptor blocker for hypertension', currentPrice: 150, originalPrice: 180, discount: 17, category: 'Cardiovascular', stock: 75, uses: ['Hypertension'], manufacturer: 'Haplex', imageUrl: 'https://ecommerce.genericartmedicine.com/upload/products/product-photo-14418032024150304.jpg' },
    { id: 24, name: 'Sildenafil 100mg', description: 'Medication for erectile dysfunction', currentPrice: 500, originalPrice: 600, discount: 17, category: 'Sexual Health', stock: 50, uses: ['Erectile Dysfunction'], manufacturer: 'Pfizer', imageUrl: 'https://www.doctorfox.co.uk/imgs-products/zoom/mylan-sildenafil-100mg.jpg' },
    { id: 25, name: 'Tadalafil 10mg', description: 'Treatment for erectile dysfunction and BPH', currentPrice: 600, originalPrice: 750, discount: 20, category: 'Sexual Health', stock: 30, uses: ['Erectile Dysfunction', 'BPH'], manufacturer: 'Eli Lilly', imageUrl: 'https://5.imimg.com/data5/IOS/Default/2022/7/FR/II/LN/74349057/product-jpeg.png' },
];

        let cart = [];
        let filteredProducts = [...products];

        // Show loading screen
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
            }, 1000);
        });

        // Enhanced render function with animation
        function renderProducts() {
            const container = document.getElementById('product-container');
            container.innerHTML = filteredProducts.map((product, index) => `
                <div class="product-card animate__animated animate__fadeIn" style="animation-delay: ${index * 0.1}s">
                    <div class="product-image-container">
                        <span class="discount-badge">${product.discount}% OFF</span>
                        <img class="product-image" src="${product.imageUrl}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="price-tag">
                            â‚¹${product.currentPrice}
                            <span class="original-price">â‚¹${product.originalPrice}</span>
                        </div>
                        <div class="action-buttons">
                            <button class="show-details-btn" onclick="toggleDetails(${product.id})">
                                Show Details
                            </button>
                            <button class="add-to-cart-btn" onclick="addToCart(${product.id})">
                                Add to Cart
                            </button>
                        </div>
                        <div class="product-details" id="details-${product.id}">
                            <p class="text-gray-600 mb-2">${product.description}</p>
                            <p class="text-gray-600 mb-2"><strong>Category:</strong> ${product.category}</p>
                            <p class="text-gray-600 mb-2"><strong>Uses:</strong> ${product.uses.join(', ')}</p>
                            <p class="text-gray-600 mb-2"><strong>Manufacturer:</strong> ${product.manufacturer}</p>
                            <p class="text-gray-600"><strong>Stock:</strong> ${product.stock} units</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function toggleDetails(productId) {
    const product = products.find(p => p.id === productId);
    const modalHtml = `
        <div class="product-details-modal" id="details-modal-${productId}">
            <div class="product-details-content">
                <button class="close-details" onclick="closeDetails(${productId})">&times;</button>
                
                <div class="product-details-header">
                    <img src="${product.imageUrl}" alt="${product.name}" class="product-details-image">
                    <div class="product-details-info">
                        <h2 class="text-xl font-bold mb-2">${product.name}</h2>
                        <div class="price-tag mb-2">
                            â‚¹${product.currentPrice}
                            <span class="original-price">â‚¹${product.originalPrice}</span>
                        </div>
                        <span class="stock-badge">${product.stock} units in stock</span>
                    </div>
                </div>

                <div class="details-section">
                    <h3 class="font-semibold mb-2">Description</h3>
                    <p class="text-gray-600">${product.description}</p>
                </div>

                <div class="details-section">
                    <h3 class="font-semibold mb-2">Category</h3>
                    <p class="text-gray-600">${product.category}</p>
                </div>

                <div class="details-section">
                    <h3 class="font-semibold mb-2">Uses</h3>
                    <p class="text-gray-600">${product.uses.join(', ')}</p>
                </div>

                <div class="details-section">
                    <h3 class="font-semibold mb-2">Manufacturer</h3>
                    <p class="text-gray-600">${product.manufacturer}</p>
                </div>

                <button class="add-to-cart-btn mt-4 w-full" onclick="addToCart(${product.id})">
                    Add to Cart
                </button>
            </div>
        </div>
    `;

    document.body.insertAdjacentHTML('beforeend', modalHtml);

    const modal = document.getElementById(`details-modal-${productId}`);
    modal.style.display = 'flex';
}

// Add close function
function closeDetails(productId) {
    const modal = document.getElementById(`details-modal-${productId}`);
    modal.querySelector('.product-details-content').classList.add('animate__animated', 'animate__fadeOut');
    setTimeout(() => {
        modal.remove();
    }, 300);
}

    // Remove any existing modal
    const existingModal = document.querySelector('.product-details-modal');
    if (existingModal) {
        existingModal.remove();
    }

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm) ||
                product.category.toLowerCase().includes(searchTerm)
            );
            renderProducts();
        });

        // Enhanced cart UI update
        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');

           // Previous code remains the same up to the updateCartUI function. Let's complete it:

           cartCount.textContent = cart.reduce((total, item) => total + item.quantity, 0);

cartItems.innerHTML = cart.map(item => `
    <div class="cart-item animate__animated animate__fadeIn">
        <div class="cart-item-info">
            <h4 class="font-semibold">${item.name}</h4>
            <p class="text-sm text-gray-600">â‚¹${item.currentPrice} per unit</p>
        </div>
        <div class="cart-quantity-controls">
            <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
            <span class="mx-2">${item.quantity}</span>
            <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
        </div>
        <div class="ml-4 font-semibold">
            â‚¹${(item.currentPrice * item.quantity).toFixed(2)}
        </div>
    </div>
`).join('');

const total = cart.reduce((total, item) => total + (item.currentPrice * item.quantity), 0);
cartTotal.textContent = `â‚¹${total.toFixed(2)}`;

// Animate cart badge if items were added
cartCount.classList.add('animate__animated', 'animate__bounceIn');
setTimeout(() => {
    cartCount.classList.remove('animate__animated', 'animate__bounceIn');
}, 1000);
}

// Enhanced Add to Cart function with animation
function addToCart(productId) {
const product = products.find(p => p.id === productId);
const existingItem = cart.find(item => item.id === productId);

if (existingItem) {
    existingItem.quantity++;
} else {
    cart.push({ ...product, quantity: 1 });
}

// Show success animation
const button = document.querySelector(`button[onclick="addToCart(${productId})"]`);
button.innerHTML = 'âœ“ Added';
button.style.background = '#27ae60';

setTimeout(() => {
    button.innerHTML = 'Add to Cart';
    button.style.background = '';
}, 1000);

updateCartUI();
}

// Enhanced Update Quantity
function updateQuantity(productId, change) {
const cartItem = cart.find(item => item.id === productId);

if (cartItem) {
    cartItem.quantity = Math.max(0, cartItem.quantity + change);
    if (cartItem.quantity === 0) {
        cart = cart.filter(item => item.id !== productId);
    }
    updateCartUI();
}
}

// Cart Modal Controls
const cartModal = document.getElementById('cart-modal');

document.getElementById('cart-button').addEventListener('click', () => {
cartModal.style.display = 'flex';
setTimeout(() => {
    cartModal.querySelector('.modal-content').classList.add('animate__animated', 'animate__slideInUp');
}, 100);
});

document.getElementById('close-cart').addEventListener('click', () => {
const modalContent = cartModal.querySelector('.modal-content');
modalContent.classList.add('animate__animated', 'animate__slideOutDown');
setTimeout(() => {
    cartModal.style.display = 'none';
    modalContent.classList.remove('animate__animated', 'animate__slideOutDown');
}, 300);
});

// Enhanced Checkout with QR Code
document.getElementById('checkout-btn').addEventListener('click', () => {
// Show loading animation
const checkoutBtn = document.getElementById('checkout-btn');
checkoutBtn.innerHTML = '<span class="loading-spinner"></span> Generating QR Code...';
checkoutBtn.disabled = true;

setTimeout(() => {
    document.getElementById('qrCodeSection').style.display = 'block';
    generateQRCode();
    checkoutBtn.innerHTML = 'Proceed to Checkout';
    checkoutBtn.disabled = false;
}, 1000);
});
function generateQRCode() {
    // Get cart total
    const total = cart.reduce((sum, item) => sum + (item.currentPrice * item.quantity), 0);
    
    // Fixed UPI ID (you can make this configurable)
    const upiId = 'balajibaskaran456-2@oksbi';
    
    // Format amount to 2 decimal places
    const formattedAmount = total.toFixed(2);
    
    // Construct UPI URL with payment details
    const upiUrl = `upi://pay?pa=${encodeURIComponent(upiId)}&pn=Medicine%20Store&am=${formattedAmount}&cu=INR&tn=Medicine%20Purchase`;
    
    // Get the canvas element
    const qrCodeCanvas = document.getElementById("qrCode");
    
    // Clear any existing QR code
    if (qrCodeCanvas.getContext) {
        const context = qrCodeCanvas.getContext("2d");
        context.clearRect(0, 0, qrCodeCanvas.width, qrCodeCanvas.height);
    }
    
    // Generate new QR code
    QRCode.toCanvas(qrCodeCanvas, upiUrl, {
        width: 256,
        margin: 2,
        color: {
            dark: '#000000',
            light: '#ffffff'
        }
    }, function(error) {
        if (error) {
            console.error("Error generating QR code:", error);
            alert("Failed to generate QR code. Please try again.");
        } else {
            // Show success message
            const checkoutBtn = document.getElementById('checkout-btn');
            checkoutBtn.innerHTML = 'âœ“ QR Code Generated';
            checkoutBtn.style.backgroundColor = '#27ae60';
            
            // Reset button after 2 seconds
            setTimeout(() => {
                checkoutBtn.innerHTML = 'Proceed to Checkout';
                checkoutBtn.style.backgroundColor = '';
            }, 2000);
        }
    });
}

// Wishlist Toggle
document.querySelectorAll('.wishlist-btn').forEach(btn => {
btn.addEventListener('click', function() {
    this.classList.toggle('active');
    if (this.classList.contains('active')) {
        this.style.background = '#ff4757';
        this.style.color = 'white';
    } else {
        this.style.background = '#f1f2f6';
        this.style.color = '#ff4757';
    }
});
});

// Initialize
renderProducts();

// Add scroll animation
window.addEventListener('scroll', () => {
const cards = document.querySelectorAll('.product-card');
cards.forEach(card => {
    const cardTop = card.getBoundingClientRect().top;
    const screenHeight = window.innerHeight;
    
    if (cardTop < screenHeight - 100) {
        card.classList.add('animate__animated', 'animate__fadeIn');
    }
});
});

// Handle click outside modal to close
window.addEventListener('click', (e) => {
    if (e.target.classList.contains('product-details-modal')) {
        const productId = parseInt(e.target.id.split('-')[2]);
        closeDetails(productId);
    }
});

// Add keyboard shortcuts
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        const modal = document.querySelector('.product-details-modal');
        if (modal) {
            const productId = parseInt(modal.id.split('-')[2]);
            closeDetails(productId);
        }
    }
});
</script>
</body>
</html>